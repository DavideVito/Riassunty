<html>

<head>
	<meta charset="UTF-8">
	<title>FÃ¼hrer-Duce-Hirohito</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<script src="jquery.js"></script>
	<script>
		fetchIndirizzi();

		function fetchIndirizzi() {
			sessionStorage.clear();
			$.ajax({
				url: "http://riassunty.altervista.org/API/indirizzi.php",
				method: "POST",
				success: async function (data) {
					let div = document.createElement("div");
					let ol2 = document.createElement("ol");
					ol2.id = "navbar";

					for (let i = 0; i < data.length; i++) {
						let li = document.createElement("li");
						li.className = "menu-item";

						let a = document.createElement("a");
						a.name = "Indirizzo";
						a.innerHTML = data[i].Indirizzo;
						a.href = "#0";

						let risultati = await fetchMaterie(data[i].Indirizzo);
						console.log(risultati);

						let ol = document.createElement("ol");
						ol.className = "sub-menu";
						for (let j = 0; j < risultati.length; j++) {
							let li2 = document.createElement("li");
							li2.className = "menu-item";
							let a2 = document.createElement("a");

							a2.onclick = () => {
								sessionStorage.materiaCliccata = Number(risultati[j].IDMateria);
								window.location.href = "/RiassuntiMaterie.html"
							}
							a2.textContent = risultati[j].Materia;
							a2.href = "#0"
							li2.append(a2);
							ol.append(li2);

						}

						li.appendChild(a);
						li.appendChild(ol);
						ol2.appendChild(li);
					}

					document.getElementById("navbar").appendChild(ol2);

				}
			})
		}
		async function fetchMaterie(indirizzoHovered) {
			let resFetch = await fetch("http://riassunty.altervista.org/API/materie.php?indirizzo=" +
				indirizzoHovered);
			let risposta = await resFetch.json();
			return risposta;
		}
	</script>
</head>

<body>
	<nav class="menu" id="navbar">

	</nav>
	<!--<nav class="menu" id="navbar">
		<ol id="navbar">
			<li class="menu-item"><a href="#0">Home</a></li>
			<li class="menu-item"><a href="#0">About</a></li>
			<li class="menu-item">
				<a>Trasversale</a>
				<ol class="sub-menu">
					<li class="menu-item"><a href="#0" onclick="">Italiano</a></li>
					<li class="menu-item"><a href="#0">Storia</a></li>

				</ol>
			</li>
			<li class="menu-item">
				<a href="#0">Kabobs</a>
				<ol class="sub-menu">
					<li class="menu-item"><a href="#0">Shishkabobs</a></li>
					<li class="menu-item"><a href="#0">BBQ kabobs</a></li>
					<li class="menu-item"><a href="#0">Summer kabobs</a></li>
				</ol>
			</li>
			<li class="menu-item"><a href="#0">Contact</a></li>
		</ol>
	</nav>-->
</body>

</html>